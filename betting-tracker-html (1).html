<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Betting Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(to bottom right, #0f172a, #1e293b, #0f172a);
            min-height: 100vh;
            color: white;
        }

        .container {
            padding: 1.5rem;
        }

        .max-w-7xl {
            max-width: 80rem;
            margin: 0 auto;
        }

        .card {
            background-color: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid #334155;
            padding: 2rem;
        }

        .title {
            font-size: 2.25rem;
            font-weight: bold;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-card {
            background-color: rgba(51, 65, 85, 0.5);
            border-radius: 0.75rem;
            padding: 1rem;
            border: 1px solid #475569;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .stat-sub {
            color: #64748b;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        .text-emerald {
            color: #34d399;
        }

        .text-red {
            color: #f87171;
        }

        .text-blue {
            color: #60a5fa;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: #059669;
            color: white;
        }

        .btn-primary:hover {
            background-color: #047857;
        }

        .btn-danger {
            background-color: #dc2626;
            color: white;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn-danger:hover {
            background-color: #b91c1c;
        }

        .btn-secondary {
            background-color: #475569;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #334155;
        }

        .form-container {
            background-color: rgba(51, 65, 85, 0.5);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #475569;
        }

        .form-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        @media (min-width: 768px) {
            .form-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .form-input {
            background-color: #1e293b;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid #475569;
            outline: none;
        }

        .form-input:focus {
            border-color: #059669;
        }

        .form-input::placeholder {
            color: #64748b;
        }

        .textarea-full {
            grid-column: span 2;
        }

        .hidden {
            display: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            color: #94a3b8;
            font-weight: 600;
            padding: 0.75rem 0.5rem;
            border-bottom: 1px solid #334155;
        }

        td {
            padding: 0.75rem 0.5rem;
            border-bottom: 1px solid rgba(51, 65, 85, 0.5);
            color: #cbd5e1;
        }

        tbody tr:hover {
            background-color: rgba(51, 65, 85, 0.3);
        }

        .result-select {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
        }

        .result-win {
            background-color: #059669;
            color: white;
        }

        .result-loss {
            background-color: #dc2626;
            color: white;
        }

        .result-push {
            background-color: #475569;
            color: white;
        }

        .result-pending {
            background-color: #d97706;
            color: white;
        }

        .overflow-auto {
            overflow-x: auto;
        }

        .text-center {
            text-align: center;
        }

        .empty-message {
            color: #64748b;
            padding: 2rem 0;
        }

        .delete-btn {
            color: #f87171;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            transition: color 0.2s;
        }

        .delete-btn:hover {
            color: #fca5a5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="max-w-7xl">
            <div class="card">
                <h1 class="title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
                    Sports Betting Tracker
                </h1>

                <!-- Stats Dashboard -->
                <div id="stats" class="stats-grid"></div>

                <!-- Buttons and Filters -->
                <div class="button-container">
                    <button onclick="toggleForm()" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Add New Bet
                    </button>
                    <div style="display: flex; gap: 0.75rem; align-items: center;">
                        <select id="monthFilter" onchange="filterByMonth()" class="form-input" style="padding: 0.5rem 1rem; width: 200px;">
                            <option value="all">All Time</option>
                        </select>
                        <button onclick="exportToCSV()" class="btn btn-secondary" style="padding: 0.5rem 1rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            Export CSV
                        </button>
                        <button onclick="resetAllData()" class="btn btn-danger">
                            Reset All Data
                        </button>
                    </div>
                </div>

                <!-- Bet Form -->
                <div id="betForm" class="form-container hidden">
                    <h3 class="form-title">New Bet</h3>
                    <div class="form-grid">
                        <input type="date" id="date" class="form-input">
                        <input type="text" id="sport" placeholder="Sport (e.g., NFL, NBA)" class="form-input">
                        <input type="text" id="matchup" placeholder="Matchup (e.g., Lakers vs Celtics)" class="form-input">
                        <input type="text" id="betType" placeholder="Bet Type (e.g., Spread, ML, O/U)" class="form-input">
                        <input type="text" id="odds" placeholder="Odds (e.g., -110, +150)" class="form-input">
                        <input type="number" id="stake" placeholder="Stake" value="50" class="form-input">
                        <select id="result" class="form-input">
                            <option value="pending">Pending</option>
                            <option value="win">Win</option>
                            <option value="loss">Loss</option>
                            <option value="push">Push</option>
                        </select>
                        <textarea id="notes" placeholder="Notes (strategy, reasoning, etc.)" class="form-input textarea-full" rows="2"></textarea>
                    </div>
                    <div style="display: flex; gap: 0.75rem;">
                        <button onclick="saveBet()" class="btn btn-primary">
                            Save Bet
                        </button>
                        <button onclick="toggleForm()" class="btn btn-secondary">
                            Cancel
                        </button>
                    </div>
                </div>

                <!-- Bets Table -->
                <div class="overflow-auto">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Sport</th>
                                <th>Matchup</th>
                                <th>Type</th>
                                <th>Odds</th>
                                <th>Stake</th>
                                <th>Result</th>
                                <th>P/L</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="betsTable">
                            <tr>
                                <td colspan="9" class="text-center empty-message">
                                    No bets recorded yet. Click "Add New Bet" to start tracking!
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        const INITIAL_BANKROLL = 1000;
        let bets = [];
        let bankroll = INITIAL_BANKROLL;

        window.addEventListener('DOMContentLoaded', () => {
            loadData();
            document.getElementById('date').valueAsDate = new Date();
        });

        function loadData() {
            const savedBets = localStorage.getItem('bettingTrackerBets');
            const savedBankroll = localStorage.getItem('bettingTrackerBankroll');
            
            if (savedBets) {
                bets = JSON.parse(savedBets);
            }
            if (savedBankroll) {
                bankroll = parseFloat(savedBankroll);
            }
            
            renderAll();
        }

        function saveData() {
            localStorage.setItem('bettingTrackerBets', JSON.stringify(bets));
            localStorage.setItem('bettingTrackerBankroll', bankroll.toString());
        }

        function toggleForm() {
            const form = document.getElementById('betForm');
            form.classList.toggle('hidden');
        }

        function calculateProfit(odds, stake) {
            const numOdds = parseFloat(odds);
            if (numOdds > 0) {
                return (numOdds / 100) * stake;
            } else {
                return (100 / Math.abs(numOdds)) * stake;
            }
        }

        function saveBet() {
            const date = document.getElementById('date').value;
            const sport = document.getElementById('sport').value;
            const matchup = document.getElementById('matchup').value;
            const betType = document.getElementById('betType').value;
            const odds = document.getElementById('odds').value;
            const stake = parseFloat(document.getElementById('stake').value);
            const result = document.getElementById('result').value;
            const notes = document.getElementById('notes').value;

            if (!sport || !matchup || !betType || !odds) {
                alert('Please fill in all required fields');
                return;
            }

            const profit = result === 'win' ? calculateProfit(odds, stake) :
                          result === 'loss' ? -stake :
                          result === 'push' ? 0 : 0;

            const bet = {
                id: Date.now(),
                date,
                sport,
                matchup,
                betType,
                odds,
                stake,
                result,
                profit,
                notes
            };

            bets.unshift(bet);
            saveData();
            renderAll();
            toggleForm();
            
            document.getElementById('sport').value = '';
            document.getElementById('matchup').value = '';
            document.getElementById('betType').value = '';
            document.getElementById('odds').value = '';
            document.getElementById('stake').value = '50';
            document.getElementById('result').value = 'pending';
            document.getElementById('notes').value = '';
        }

        function updateBetResult(id, newResult) {
            const bet = bets.find(b => b.id === id);
            if (bet) {
                bet.result = newResult;
                bet.profit = newResult === 'win' ? calculateProfit(bet.odds, bet.stake) :
                            newResult === 'loss' ? -bet.stake :
                            newResult === 'push' ? 0 : 0;
                saveData();
                renderAll();
            }
        }

        function deleteBet(id) {
            if (confirm('Are you sure you want to delete this bet?')) {
                bets = bets.filter(b => b.id !== id);
                saveData();
                renderAll();
            }
        }

        function resetAllData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                bets = [];
                bankroll = INITIAL_BANKROLL;
                localStorage.removeItem('bettingTrackerBets');
                localStorage.removeItem('bettingTrackerBankroll');
                renderAll();
                alert('All data has been reset!');
            }
        }

        function calculateStats() {
            const settled = bets.filter(b => b.result !== 'pending');
            const wins = settled.filter(b => b.result === 'win').length;
            const losses = settled.filter(b => b.result === 'loss').length;
            const totalProfit = settled.reduce((sum, bet) => sum + bet.profit, 0);
            const totalStaked = settled.reduce((sum, bet) => sum + bet.stake, 0);
            const roi = totalStaked > 0 ? (totalProfit / totalStaked) * 100 : 0;
            const winRate = settled.length > 0 ? (wins / settled.length) * 100 : 0;
            const unitsWon = totalProfit / 50;

            return { wins, losses, totalProfit, roi, winRate, unitsWon, settled: settled.length };
        }

        function renderStats() {
            const stats = calculateStats();
            const currentBankroll = bankroll + stats.totalProfit;
            
            document.getElementById('stats').innerHTML = `
                <div class="stat-card">
                    <p class="stat-label">Current Bankroll</p>
                    <p class="stat-value ${currentBankroll >= bankroll ? 'text-emerald' : 'text-red'}">
                        $${currentBankroll.toFixed(2)}
                    </p>
                </div>
                <div class="stat-card">
                    <p class="stat-label">Total P/L</p>
                    <p class="stat-value ${stats.totalProfit >= 0 ? 'text-emerald' : 'text-red'}">
                        ${stats.totalProfit >= 0 ? '+' : ''}${stats.totalProfit.toFixed(2)}
                    </p>
                    <p class="stat-sub">(${stats.unitsWon >= 0 ? '+' : ''}${stats.unitsWon.toFixed(2)} units)</p>
                </div>
                <div class="stat-card">
                    <p class="stat-label">Win Rate</p>
                    <p class="stat-value text-blue">${stats.winRate.toFixed(1)}%</p>
                    <p class="stat-sub">${stats.wins}W - ${stats.losses}L</p>
                </div>
                <div class="stat-card">
                    <p class="stat-label">ROI</p>
                    <p class="stat-value ${stats.roi >= 0 ? 'text-emerald' : 'text-red'}">
                        ${stats.roi >= 0 ? '+' : ''}${stats.roi.toFixed(1)}%
                    </p>
                    <p class="stat-sub">${stats.settled} settled bets</p>
                </div>
            `;
        }

        function renderTable() {
            const tbody = document.getElementById('betsTable');
            
            if (bets.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="9" class="text-center empty-message">
                            No bets recorded yet. Click "Add New Bet" to start tracking!
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = bets.map(bet => `
                <tr>
                    <td>${bet.date}</td>
                    <td>${bet.sport}</td>
                    <td>${bet.matchup}</td>
                    <td>${bet.betType}</td>
                    <td>${bet.odds}</td>
                    <td>$${bet.stake}</td>
                    <td>
                        <select 
                            onchange="updateBetResult(${bet.id}, this.value)"
                            class="result-select result-${bet.result}"
                        >
                            <option value="pending" ${bet.result === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="win" ${bet.result === 'win' ? 'selected' : ''}>Win</option>
                            <option value="loss" ${bet.result === 'loss' ? 'selected' : ''}>Loss</option>
                            <option value="push" ${bet.result === 'push' ? 'selected' : ''}>Push</option>
                        </select>
                    </td>
                    <td style="font-weight: 600; color: ${bet.profit > 0 ? '#34d399' : bet.profit < 0 ? '#f87171' : '#94a3b8'}">
                        ${bet.profit > 0 ? '+' : ''}${bet.profit.toFixed(2)}
                    </td>
                    <td>
                        <button onclick="deleteBet(${bet.id})" class="delete-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function renderAll() {
            renderStats();
            renderTable();
        }
    </script>
</body>
</html>